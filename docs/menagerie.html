<h1>Menagerie API Documentation</h1>

<ul>
<li>Last Generated: Wednesday November 21st 2012, 11:12 CST (1353517935)</li>
<li>By: rarity\bob</li>
</ul>

<h1>Packages in this Project</h1>

<ul>
<li>Surface</li>
</ul>

<h1>Package: Surface</h1>

<p><strong>No Package Description</strong></p>

<h2>Options</h2>

<h3>surface-auto</h3>

<ul>
<li>Type: boolean</li>
<li>Default: true</li>
</ul>

<p>controls if the library should create an instance to manage for you
automatically. for "normal web sites" this makes your life easier. it is
accessable via the menagerie stash.</p>

<h3>surface-theme</h3>

<ul>
<li>Type: string</li>
<li>Default: "default"</li>
</ul>

<p>the theme which the renderer will attempt to use at shutdown render time. note
this does not have to be an HTML template. you could make templates which render
DNS zone files or Email bodies.</p>

<h3>surface-style</h3>

<ul>
<li>Type: string</li>
<li>Default: "default"</li>
</ul>

<p>a substyle option for themes. generally only pages will use this for including
an additional css file or something to that effect.</p>

<h3>surface-brand-title</h3>

<ul>
<li>Type: boolean</li>
<li>Default: true</li>
</ul>

<p>will do its best to nicely rewrite the page-title field to include the site
name. (generally thought of as a good SEO practice)</p>

<h3>surface-theme-path</h3>

<ul>
<li>Type: string</li>
<li>Default: <em>None</em></li>
</ul>

<p>this is the local file path to the directory that has the themes you want to use
in it. by default this will be similar to...</p>

<ul>
<li><whatever>/m/themes, e.g.:</li>
<li>/var/www/whatever.com/m/themes</li>
</ul>

<p>depending on where you are running from obviously.</p>

<h3>surface-theme-uri</h3>

<ul>
<li>Type: string</li>
<li>Default: <em>None</em></li>
</ul>

<p>this is the uri path to the directory that has the themes you want to use in it.
it attempts to build itself off a common understanding of how filepaths and
basic web configurations work.</p>

<ul>
<li>IF your site root is http://whatever.com/</li>
<li>AND surface-theme-path is /var/www/whatever.com/m/themes</li>
<li><p>THEN surface-theme-uri = /m/themes</p></li>
<li><p>IF your site root is http://whatever.com/zomg/bbq/</p></li>
<li>AND surface-theme-path is /var/www/whatever.com/m/themes</li>
<li>THEN surface-theme-uri = /zomg/bbq/m/themes</li>
</ul>

<h2>Classes</h2>

<h3>m\Surface</h3>

<p>manages rendering surfaces for formatting displays with template files. can be
used to render HTML web pages, Emails, or anything else that requires a common
format with variable fields.</p>

<h4>Properties</h4>

<h5>m\Surface::Theme</h5>

<ul>
<li>Access: public</li>
<li>Type: string</li>
</ul>

<p>holds the name of the current theme that this instance is set to use when
rendering surfaces.</p>

<h5>m\Surface::Style</h5>

<ul>
<li>Access: public</li>
<li>Type: string</li>
</ul>

<p>holds the name of a substyle that themes may optionally use to further customize
their displays. not used by the library directly for anything.</p>

<h5>m\Surface::Print</h5>

<ul>
<li>Access: public</li>
<li>Type: boolean</li>
</ul>

<p>if true when the surface renders it is automatically printed to the output
stream. if false it is returned by the Render method instead. each new instance
defaults this to true.</p>

<h5>m\Surface::Storage</h5>

<ul>
<li>Access: private</li>
<li>Type: array</li>
</ul>

<p>a private storage for all the variable data to be used in the surface system at
render time.</p>

<h5>m\Surface::Capturing</h5>

<ul>
<li>Access: private</li>
<li>Type: boolean</li>
</ul>

<p>a private switch noting if this instance had started an overbuffer to
automatically capture stdout.</p>

<h4>Methods</h4>

<h5>m\Surface::CaptureStart</h5>

<pre><code>public boolean CaptureStart(void);
</code></pre>

<p>starts an offscreen buffer for capturing STDOUT.</p>

<h5>m\Surface::CaptureStop</h5>

<pre><code>public boolean CaptureStop(
    boolean Append = true
);
</code></pre>

<p>stops an offscreen buffer. if the Append argument is true then the contents from
the buffer that was stopped is appended to the internal storage for this surface
instance. if the Append argument is false then the output is disregarded.</p>

<h5>m\Surface::Render</h5>

<pre><code>public void Render(void);
</code></pre>

<p>renders a complete template using the design.phtml as the main container.
calling this will automatically fetch any STDOUT that may have been captured to
be rendered by the 'stdout' key in the page template. this surface instance is
also passed to the template files and is accessable via the $surface interface.</p>

<h5>m\Surface::RenderDoSpecial</h5>

<pre><code>private void RenderDoSpecial(void);
</code></pre>

<p>perform some special renderings based on options that might have been set. these
are tasks designed to make templating pages a little nicer.</p>

<h5>m\Surface::GetThemePath</h5>

<pre><code>private string GetThemePath(void);
</code></pre>

<p>check that the theme that is requested exists. if it does it returns the full
filepath to that file. else it returns false.</p>

<h5>m\Surface::GetThemeURI</h5>

<pre><code>private string GetThemeURI(void);
</code></pre>

<p>returns the uri to the theme directory for use in URI/URLs. if this is
generating bad prefixes then you may need to tweak surface-theme-path and or
surface-theme-uri in your config file.</p>

<h5>m\Surface::Area</h5>

<pre><code>public void Area(
    string Filename
);
</code></pre>

<p>render a template subview from the area folder in a theme. allows you to break
themes into sections and pull them in as you want them like a box of legos.</p>

<h5>m\Surface::Append</h5>

<pre><code>public void Append(
    mixed Value
);
</code></pre>

<p>store data to be used by the template engine under the Key name. you can store
any data type you want. just remember if you store an array and then try to Show
instead of Get it you are gonna have a bad time.</p>

<h5>m\Surface::Get</h5>

<pre><code>public mixed Get(
    mixed Key
);
</code></pre>

<p>return the data that has been stored in the template storage under the Key name.
if the key name is a string you get back the value stored there. if the key is
an array list of keys, then you get back an array list of the stored values.</p>

<p>if the value you wanted has never been stoerd then you get null.</p>

<h5>m\Surface::Has</h5>

<pre><code>public boolean Has(
    string Key
);
</code></pre>

<p>a simple check to see if the requested Key has ever been assigned to the surface
storage.</p>

<h5>m\Surface::Show</h5>

<pre><code>public void Show(
    boolean NewLine = false
);
</code></pre>

<p>will attempt to show (echo) the data stored under that Key value. if the NewLine
argument is true then an additional new line will be added after. the NewLine
argument exists because of odd and sometimes what appears to be inconsistant
behaviour on PHP's part after <?php ?>'ing in a template.</p>

<h5>m\Surface::Set</h5>

<pre><code>public mixed Set(
    mixed Value
);
</code></pre>

<p>stores the requested data under the requested key name in the surface storage.
also returns the value at the same time.</p>

<h5>m\Surface::URI</h5>

<pre><code>public string URI(
    boolean ReturnValue = false
);
</code></pre>

<p>will attempt to generate a full URI for referencing objects that belong to the
theme. for example providing a path of 'gfx/logo.png' may return something like
'/m/themes/default/gfx/logo.png' depending on your setup.</p>
